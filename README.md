# ember-tinymce ðŸ“ƒ

This addon provides [TinyMCE v5](https://www.tinymce.com/) (a wysiwyg-editor) as an ember component. 

## Installation
To get started simply install the addon:

```
ember install ember-tinymce
```

### Component

```hbs
{{tinymce-editor
  options=options 
  value=text
}}
```

 - *options* attribute is full powered to [tinymce documentation](https://www.tiny.cloud/docs/configure/). Changing the options will cause the editor to reload.
 - *value* - the html text generated by editor.

If you need to display the *value*, use the *{{{value}}}* helper for HTML text in the handlebars to prevent escaping.

## Data down actions up

By default, the value is updated in the addon. If you want to follow [Data Down, Actions Up (DDAU)](https://discuss.emberjs.com/t/readers-questions-what-is-meant-by-the-term-data-down-actions-up/15311)
guidelines please define the `onValueChanged` action.

```hbs
{{tinymce-editor
  options=options
  value=text
  onValueChanged=(action "myonValueChangedAction")
}}
```

and in your controller

```js
  actions: {
    ...
    myonValueChangedAction(value) {
      // Do something with the value.
      // At least the text should be updated:
      this.set('text', value)
    }
  }
```

Or, as a shorthand using the `mut` helper:

```hbs
{{tinymce-editor 
  options=options 
  value=text 
  onValueChanged=(action (mut text))
}}
```

### Including TinyMCE

You can load TinyMCE using a free API Key by signing up for [tiny's CDN](https://www.tiny.cloud/):

```js
ENV:{
  ...,
  tinyMCE:{
    apiKey: 'my-api-key',
    version: '5.2' //default 5.4.1
  }
}
```

Be aware *version* is a semver reflection of the Tinymce CDN which can introduce
issues if a bad release is automatically picked up by your application

Set this to `false` to disable including TinyMCE automatically on app load:

```js
ENV:{
  ...,
  tinyMCE:{
    load: false,
  }
}
```

You can then load TinyMCE, as required, in your routes like so (using JQuery integration):

```js
beforeModel(){
  this._super(...arguments);
  if (typeof tinymce == 'undefined'){
    return this.$().getScript('https://cdn.tiny.cloud/1/my-api-key/tinymce/5.4.1/tinymce.min.js');
  }
}
```

### Subresource Integrity (SRI Hash)
This addon supports bring-your-own SRI Hash validation for ensuring the scripts
provided to users haven't been maliciously changed.

You can configure this in your app's environment settings:

```js
ENV:{
  ...,
  tinyMCE:{
    apiKey: 'my-api-key',
    version: '5.4.1-89', //default 5.4.1
    sriHash: 'sha256-ITVSXTRj8rUxWZ+XNuqcozwzPpG6XQB2doC/vz5FfjI= sha384-KW7FdwkWUxvYBq9xLaE8aybRBHrjZVXUqj9qb2je0hMf9T89n5mSpS1yuYti2G5X sha512-mgWyCXMylJaTTsc+KyUWTdCkXVirb9RYV2ZC+ABlOjyNUnUCymbELQAw5KUBNyaD9zZOkdqYYIDf5JSSpjnelg=='
  }
}
```

If you are using tiny cloud, the easiest way to generate this string is to add
`report-uri.com` as a trusted domain. Then using your generated URI (with API 
key and TinyMCE version) head to [Create your SRI hash](https://report-uri.com/home/sri_hash)
to obtain your SRI hash.

## Thankyou

Thank you to [marucjmar/ember-cli-tinymce](https://marucjmar/ember-cli-tinymce)
for providing the basis of this updated implementation.
Please send a :star: his way.

## LGPLv2.1 License

Much like TinyMCE, we decided to follow suit and use the LGPL v2.1 license. 

A quick overview:
- This addon can be used in proprietary software, free of charge. 
- Unlike GPL-licenses, you _do not_ have to Open Source your proprietary code.
- Though, if you make any improvements or modifications to this library, it must
  be open-sourced for the benefit to all.

For more information on using ember-cli, visit [http://ember-cli.com/](http://ember-cli.com/).

